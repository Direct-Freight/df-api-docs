delete:
  description: >-
    By only sending in their EUA token you would be requesting to opt them out
    of everything.
  parameters:
    - enum:
        - email
        - text
        - voice
        - push
      in: query
      name: notification_medium
      required: false
      type: string
    - default: all
      description: This would allow granular optouts. Currently ignored.
      enum:
        - all
        - alerts
      in: query
      name: notification_channel
      required: false
      type: string
    - in: header
      name: end-user-token
      required: true
      type: string
  responses:
    '204':
      description: Status 204
  summary: STAGE=UNK Opt someone out of one or more mediums and channels.
  tags:
    - optins
get:
  parameters:
    - description: To limit your list to just one medium.
      enum:
        - email
        - text
        - voice
        - push
      in: query
      name: notification_medium
      required: true
      type: string
    - in: header
      name: end-user-token
      required: true
      type: string
  responses:
    '200':
      description: Status 200
      schema:
        properties:
          list:
            items:
              properties:
                notification_channel:
                  default: all
                  type: string
                notification_medium:
                  enum:
                    - email
                    - text
                    - push
                  type: string
                status:
                  enum:
                    - optin
                    - optout
                    - no response
                    - no record
                  type: string
              required:
                - notification_channel
                - notification_medium
                - status
              type: object
            type: array
        required:
          - list
        type: object
  summary: STAGE=UNK Get the optin status of a user.
  tags:
    - optins
patch:
  description: >-
    Used to verify an optin code, or update which channels the user is
    subscribed to. Email is not yet enabled.
  parameters:
    - in: header
      name: end-user-token
      required: true
      type: string
    - in: body
      name: body
      required: true
      schema:
        properties:
          code:
            description: >-
              This code is generated on a POST, and will arrive via the same
              medium it was designated for.
            type: string
          notification_channel:
            description: >-
              Specify which channels to subscribe to update. You can also send
              in an empty string to opt out of everything.
            enum:
              - all
              - alerts
              - search_data
            type: string
          notification_medium:
            enum:
              - email
              - text
              - voice
            type: string
        required:
          - notification_medium
        type: object
  responses:
    '204':
      description: Status 204
  summary: STAGE=UNK Confirm an optin.
  tags:
    - optins
post:
  description: >-
    Text, voice, push and manual are implemented. With push a post creates and
    approves the optin. With the others, a code is sent to the refecenced
    contact, and can be verified via the PATCH operation. Email has not yet been
    enabled.
  parameters:
    - in: header
      name: end-user-token
      required: true
      type: string
    - in: body
      name: body
      required: true
      schema:
        properties:
          notification_channel:
            default: all
            description: >-
              Everything but email has been implemented. Push is 1 step
              verification. Everyone but push and manual uses PATCH to verify
              the code.
            type: string
          notification_medium:
            description: We currently only accept push
            enum:
              - email
              - text
              - voice
              - manual
              - push
            type: string
          tokens:
            description: >-
              This is how you can add multiple push notifications at once, or
              for systems that have multiple tokens required. For other
              notification mediums use "contact_number": "1234567890" instead of
              ios or android.
            properties:
              $SERVICE_OR_KEY_NAME:
                description: >-
                  Fill in the key in the value, and the service in the name.
                  Look at our examples for clarification.
                type: string
            required:
              - $SERVICE_OR_KEY_NAME
            type: object
        required:
          - notification_medium
        type: object
  responses:
    '201':
      description: Status 201
  summary: STAGE=UNK Submit a request to be opted in.
  tags:
    - optins
x-restlet:
  section: Optins
